<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Home · BandedMatrices.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>BandedMatrices.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li class="current"><a class="toctext" href="index.html">Home</a><ul class="internal"><li><a class="toctext" href="#Creating-banded-matrices-1">Creating banded matrices</a></li><li><a class="toctext" href="#Accessing-banded-matrices-1">Accessing banded matrices</a></li><li><a class="toctext" href="#Creating-symmetric-banded-matrices-1">Creating symmetric banded matrices</a></li><li><a class="toctext" href="#Banded-matrix-interface-1">Banded matrix interface</a></li><li><a class="toctext" href="#Eigenvalues-1">Eigenvalues</a></li><li><a class="toctext" href="#Implementation-1">Implementation</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href="index.html">Home</a></li></ul><a class="edit-page" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/master/docs/src/index.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Home</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="BandedMatrices.jl-Documentation-1" href="#BandedMatrices.jl-Documentation-1">BandedMatrices.jl Documentation</a></h1><h2><a class="nav-anchor" id="Creating-banded-matrices-1" href="#Creating-banded-matrices-1">Creating banded matrices</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.BandedMatrix" href="#BandedMatrices.BandedMatrix"><code>BandedMatrices.BandedMatrix</code></a> — <span class="docstring-category">Type</span>.</div><div><div><pre><code class="language-none">BandedMatrix{T}(undef, (n, m), (l, u))</code></pre><p>returns an uninitialized <code>n</code>×<code>m</code> banded matrix of type <code>T</code> with bandwidths <code>(l,u)</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/banded/BandedMatrix.jl#L43-L47">source</a><div><div><pre><code class="language-none">BandedMatrix{T}(kv::Pair, (m,n), (l,u))</code></pre><p>Construct a m × n BandedMatrix with bandwidths (l,u) from <code>Pair</code>s of diagonals and vectors. Vector <code>kv.second</code> will be placed on the <code>kv.first</code> diagonal.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/banded/BandedMatrix.jl#L216-L222">source</a><div><div><pre><code class="language-none">BandedMatrix(kv::Pair{&lt;:Integer,&lt;:AbstractVector}...)</code></pre><p>Construct a square matrix from <code>Pair</code>s of diagonals and vectors. Vector <code>kv.second</code> will be placed on the <code>kv.first</code> diagonal.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/banded/BandedMatrix.jl#L267-L272">source</a></section><pre><code class="language-none">bones</code></pre><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.brand" href="#BandedMatrices.brand"><code>BandedMatrices.brand</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">brand(T,n,m,l,u)</code></pre><p>Creates an <code>n×m</code> banded matrix  with random numbers in the bandwidth of type <code>T</code> with bandwidths <code>(l,u)</code></p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/banded/BandedMatrix.jl#L172-L176">source</a></section><p>To create a banded matrix of all zeros, identity matrix, or with a constant value use the following constructors:</p><pre><code class="language-julia-repl">julia&gt; BandedMatrix(Zeros(5,5), (1,2))
5×5 BandedMatrix{Float64,Array{Float64,2}}:
 0.0  0.0  0.0   ⋅    ⋅
 0.0  0.0  0.0  0.0   ⋅
  ⋅   0.0  0.0  0.0  0.0
  ⋅    ⋅   0.0  0.0  0.0
  ⋅    ⋅    ⋅   0.0  0.0

julia&gt; BandedMatrix(Eye(5), (1,2))
5×5 BandedMatrix{Float64,Array{Float64,2}}:
 1.0  0.0  0.0   ⋅    ⋅
 0.0  1.0  0.0  0.0   ⋅
  ⋅   0.0  1.0  0.0  0.0
  ⋅    ⋅   0.0  1.0  0.0
  ⋅    ⋅    ⋅   0.0  1.0

julia&gt; BandedMatrix(Ones(5,5), (1,2))
5×5 BandedMatrix{Float64,Array{Float64,2}}:
 1.0  1.0  1.0   ⋅    ⋅
 1.0  1.0  1.0  1.0   ⋅
  ⋅   1.0  1.0  1.0  1.0
  ⋅    ⋅   1.0  1.0  1.0
  ⋅    ⋅    ⋅   1.0  1.0</code></pre><p>To create a banded matrix of a given size with constant bands (such as the classical finite difference approximation of the one-dimensional Laplacian on the unit interval [0,1]), you can use the following:</p><pre><code class="language-julia">n = 128
h = 1/n
A = BandedMatrix{Float64}(undef, (n,n), (1,1))
A[band(0)] .= -2/h^2
A[band(1)] .= A[band(-1)] .= 1/h^2</code></pre><p>Creating a large banded matrix from a dense matrix should be avoided because that costs time and memory:</p><pre><code class="language-julia-repl">julia&gt; @time BandedMatrix(ones(10000,10000),(0,0));
0.775120 seconds (10 allocations: 763.016 MiB, 28.04% gc time)</code></pre><p>Try to use structured matrices to get around this:</p><pre><code class="language-julia-repl">julia&gt; @time BandedMatrix(Ones(10000,10000),(0,0));
0.000074 seconds (9 allocations: 78.469 KiB)</code></pre><p>Another example:</p><pre><code class="language-julia-repl">julia&gt; @time BandedMatrix([Ones(10000,5000) Zeros(10000,5000)],(1,1));
0.346918 seconds (22 allocations: 763.169 MiB, 8.38% gc time)

julia&gt; using LazyArrays
julia&gt; @time BandedMatrix(Hcat(Ones(10000,5000),Zeros(10000,5000)),(1,1));
0.012627 seconds (30.01 k allocations: 1.374 MiB, 92.24% gc time)</code></pre><p>See <a href="https://github.com/JuliaArrays/LazyArrays.jl">LazyArrays</a>, <a href="https://github.com/JuliaArrays/FillArrays.jl">FillArrays</a> for other implemented structured matrices.</p><h2><a class="nav-anchor" id="Accessing-banded-matrices-1" href="#Accessing-banded-matrices-1">Accessing banded matrices</a></h2><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.bandwidths" href="#BandedMatrices.bandwidths"><code>BandedMatrices.bandwidths</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">bandwidths(A)</code></pre><p>Returns a tuple containing the upper and lower bandwidth of <code>A</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/generic/AbstractBandedMatrix.jl#L16-L20">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.bandwidth" href="#BandedMatrices.bandwidth"><code>BandedMatrices.bandwidth</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">bandwidth(A,i)</code></pre><p>Returns the lower bandwidth (<code>i==1</code>) or the upper bandwidth (<code>i==2</code>).</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/generic/AbstractBandedMatrix.jl#L25-L29">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.bandrange" href="#BandedMatrices.bandrange"><code>BandedMatrices.bandrange</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">bandrange(A)</code></pre><p>Returns the range <code>-bandwidth(A,1):bandwidth(A,2)</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/generic/AbstractBandedMatrix.jl#L32-L36">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="BandedMatrices.band" href="#BandedMatrices.band"><code>BandedMatrices.band</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-none">band(i)</code></pre><p>Represents the <code>i</code>-th band of a banded matrix.</p><pre><code class="language-julia-repl">julia&gt; using BandedMatrices

julia&gt; A = BandedMatrix(Ones(5,5),(1,1))
5×5 BandedMatrix{Float64,Array{Float64,2}}:
 1.0  1.0   ⋅    ⋅    ⋅
 1.0  1.0  1.0   ⋅    ⋅
  ⋅   1.0  1.0  1.0   ⋅
  ⋅    ⋅   1.0  1.0  1.0
  ⋅    ⋅    ⋅   1.0  1.0

julia&gt; A[band(1)]
4-element Array{Float64,1}:
 1.0
 1.0
 1.0
 1.0</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/JuliaMatrices/BandedMatrices.jl/blob/e8087b57189d451423e3a498b9a91823a220ec95/src/generic/Band.jl#L8-L31">source</a></section><pre><code class="language-none">BandRange</code></pre><h2><a class="nav-anchor" id="Creating-symmetric-banded-matrices-1" href="#Creating-symmetric-banded-matrices-1">Creating symmetric banded matrices</a></h2><p>Use <code>Symmetric(::BandedMatrix)</code> to work with symmetric banded matrices.</p><h2><a class="nav-anchor" id="Banded-matrix-interface-1" href="#Banded-matrix-interface-1">Banded matrix interface</a></h2><p>Banded matrices go beyond the type <code>BandedMatrix</code>: one can also create matrix types that conform to the <em>banded matrix interface</em>, in which case many of the utility functions in this package are available. The banded matrix interface consists of the following:</p><table><tr><th>Required methods</th><th>Brief description</th></tr><tr><td><code>bandwidths(A)</code></td><td>Returns a tuple containing the sub-diagonal and super-diagonal bandwidth</td></tr><tr><td><code>isbanded(A)</code></td><td>Override to return <code>true</code></td></tr></table><table><tr><th>Optional methods</th><th>Brief description</th></tr><tr><td><code>inbands_getindex(A, k, j)</code></td><td>Unsafe: return <code>A[k,j]</code>, without the need to check if we are inside the bands</td></tr><tr><td><code>inbands_setindex!(A, v, k, j)</code></td><td>Unsafe: set <code>A[k,j] = v</code>, without the need to check if we are inside the bands</td></tr><tr><td><code>BandedMatrices.MemoryLayout(A)</code></td><td>Override to get banded lazy linear algebra, e.g. <code>y .= Mul(A,x)</code></td></tr><tr><td><code>BandedMatrices.bandeddata(A)</code></td><td>Override to return a matrix of the entries in BLAS format. Required if <code>MemoryLayout(A)</code> returns <code>BandedColumnMajor</code></td></tr></table><p>Note that certain <code>SubArray</code>s of <code>BandedMatrix</code> are also banded matrices. The banded matrix interface is implemented for such <code>SubArray</code>s to take advantage of this.</p><h2><a class="nav-anchor" id="Eigenvalues-1" href="#Eigenvalues-1">Eigenvalues</a></h2><p>To compute efficiently a selection of eigenvalues for a <code>BandedMatrix</code>, you may use any Krylov method that relies on a sequence of matrix * vector operations. For instance, using the package <a href="https://github.com/Jutho/KrylovKit.jl">KrylovKit</a>:</p><pre><code class="language-julia">using KrylovKit
A = BandedMatrix(Eye(5), (1, 1))
KrylovKit.eigsolve(A, 1, :LR)</code></pre><h2><a class="nav-anchor" id="Implementation-1" href="#Implementation-1">Implementation</a></h2><p>Currently, only column-major ordering is supported: a banded matrix <code>B</code></p><pre><code class="language-julia">[ a_11 a_12  ⋅    ⋅
  a_21 a_22 a_23  ⋅
  a_31 a_32 a_33 a_34
   ⋅   a_42 a_43 a_44  ]</code></pre><p>is represented as a <code>BandedMatrix</code> with a field <code>B.data</code> representing the matrix as</p><pre><code class="language-julia">[ ⋅     a_12   a_23    a_34
 a_11   a_22   a_33    a_44
 a_21   a_32   a_43    ⋅
 a_31   a_42   ⋅       ⋅       ]</code></pre><p><code>B.l</code> gives the number of subdiagonals (2) and <code>B.u</code> gives the number of super-diagonals (1).  Both <code>B.l</code> and <code>B.u</code> must be non-negative at the moment.</p><footer><hr/></footer></article></body></html>
